# 简单记录下速度
_所记录的速度都是第二次推理之后的结果_
## 1, 使用 controlnet.engine 与 unet.engine， 开启FP16

| Module      | Cost time|
|---          |---       |
| Preprocess  |    7.415 | \ 
| Clip        |   35.348 | \ 
| Ctrl & Unet |  836.029 | \ 
| Decode      |   10.542 | \ 
| Postprocess |   47.244 | \ 
| Total       |  936.578 | \ 

## 2, 使用 controlnet.engine、unet.engine 与 clip.engine， 开启FP16

clip部分有bug，输出Nan

| Module      | Cost time|
|---          |---       |
| Preprocess  |    7.620 | \ 
| Clip        |    5.493 | \ 
| Ctrl & Unet |  843.790 | \ 
| Decode      |    9.568 | \ 
| Postprocess |   47.595 | \ 
| Total       |  914.066 | \ 

## 3, 使用 controlnet.engine、unet.engine 与 decoder.engine， 开启FP16


| Module      | Cost time|
|---          |---       |
| Preprocess  |    4.008 | \ 
| Clip        |   29.684 | \ 
| Ctrl & Unet |  828.990 | \ 
| Decode      |   23.349 | \ 
| Postprocess |    0.932 | \ 
| Total       |  886.963 | \

## 3, 使用 controlnet.engine、unet.engine 与 decoder.engine， 开启FP16 预存 controlnet 与 unet 使用的buffer

| Module      | Cost time|
|---          |---       |
| Preprocess  |    4.542 | \ 
| Clip        |   28.044 | \ 
| Ctrl & Unet |  694.356 | \ 
| Decode      |   24.171 | \ 
| Postprocess |    0.922 | \ 
| Total       |  752.035 | \ 

## 4, steps=20
pd分
[2.421991977606215, 3.132378765019516, 3.6328922091596723, 1.4883711264374286, 5.775617235250268, 4.463559057150557, 4.598400460230559, 2.8655961442568736, 3.5720105111426483, 2.122779714876676, 3.3387070629809363, 2.7358047747996386, 2.6599916124796774, 1.048080380933792, 2.732117800707262, 2.96219820050584, 3.818059321952499, 3.1527237167490707, 6.1528682343511925, 2.7852605163291613]

A4000推理时间 约575ms

## 5, steps=20 * 0.8
[4.623678515928807, 4.338118168775466, 5.466321466946905, 4.614733892996592, 7.63266688739507, 5.811785664749873, 7.305336303627637, 4.942019778186541, 6.742475202563119, 3.767947348319969, 6.523981973372613, 5.875367194548356, 8.13041255286612, 3.780465597169681, 3.955697439107585, 6.040400235780585, 6.002014523324378, 6.257611310405742, 12.090022467804568, 7.614617068941547]

A4000推理时间 约500ms

## 6, steps=20 * 0.7
自测：[4.8610238385982125, 4.341223990915839, 5.357500323360818, 5.128922629678662, 7.304740078573534, 7.377232493624535, 7.908927871625013, 4.665089477639094, 7.323432872095159, 3.7025429004923995, 6.193464652492641, 7.172123299162, 8.885209503060477, 3.647452236595812, 3.872453631982698, 6.771705371062614, 6.024776492924119, 6.387618792352878, 11.667257324512565, 8.39491655594834]

提交：[9.892789235563903,7.749215579158432,7.345791142864596,12.596082313441817,6.131039118071728,7.7766135829088645,4.075042478900894,13.578838392049578,5.898067977188619,13.460404989912309,7.360806795330169,12.821828212053099,3.1592807386757955,9.276430862673395,6.14617580402556,9.450711121305948,6.68341719649022,6.628802601858226,14.732997810978993,9.048185299207564,6.333518388161782,8.115822547320818,10.249267930859308,11.738386191528654,8.63701401254944,6.656122758345878,6.922907411925479,12.349457382119873,8.40822775047427,6.028696698650315,6.308864154693269,6.097272874707202,4.768157549774537,8.153547750136978,6.980279923687189,10.86187910138911]

A4000推理时间 约451ms
提交A10服务器推理时间 约354ms


## 7, steps=20 * 0.65
[4.853883970868558, 4.070261593676267, 4.820635933652171, 5.339371526807852, 7.455804007869208, 5.855079088037585, 6.9506962163262065, 4.725979879632702, 6.764380477328701, 3.953373959560824, 4.8859010418829065, 7.01490584241164, 8.52616310298528, 3.884224710702058, 3.873693601322795, 6.64585038821046, 6.149629141442714, 5.07021019134371, 12.820919306995142, 8.752142589059073]

A4000推理时间 约415ms

## 8, steps=20 * 0.6

[4.684094618566361, 4.917514707392777, 5.794079622763748, 5.978606972541192, 8.017689007371757, 6.228075431739721, 7.1141927506538005, 6.080529802766077, 6.1402099765139315, 4.218669366551821, 5.207071550590815, 7.241272960669885, 8.842704317499617, 3.4965575049636177, 4.7062157420153525, 5.672966684334715, 6.825799321593703, 6.497644887559915, 13.631515128712149, 9.072260430624556]

A4000推理时间 约387ms

## 9, steps=20 * 0.5
[4.8231409527010145, 4.100507691509521, 5.030303764204214, 3.898961668630758, 12.462830696243369, 7.689075318485325, 8.550324012711874, 4.774768623490992, 6.056519960572083, 4.3383659949174795, 7.125999292918446, 7.749615570762384, 7.883780538542995, 3.5406309099011257, 6.907067737168996, 4.70283228685549, 8.879418881106318, 6.438118019803251, 11.28531233425106, 5.788513303219569]

A4000推理时间 约311ms


## 10, steps=20 * 0.4
[5.572344998491704, 4.568433258919454, 5.667546971954881, 5.438412243256965, 12.179004687069948, 10.03174053629201, 8.799707621627636, 5.708663829876893, 6.830804791273149, 6.3519912758737656, 7.136394159424392, 8.83495915411557, 8.625826106753136, 5.825561628050401, 6.918470330804926, 9.47957394347751, 10.947711701974832, 7.537148086246929, 10.735287440685553, 9.251269108038626]

A4000推理时间 约257ms

## 10, steps=20 * 0.3
[4.723333683282009, 5.637779255944412, 7.019257829864011, 4.994149860867377, 10.994352728999926, 7.631538900834298, 6.981239103857752, 5.228311759761202, 6.631974507101677, 5.6890582977335, 8.055241163343528, 10.356255404991744, 7.07062598318542, 3.3724089649223767, 5.675875925312792, 8.039811790441195, 6.767972303629616, 8.19015993884335, 13.526273150960435, 6.812051082213611]

A4000推理时间 约226ms
